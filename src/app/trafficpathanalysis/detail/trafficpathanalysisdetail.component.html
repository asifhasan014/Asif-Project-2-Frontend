<!-- main app container -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      {{ "trafficpathanalysis" | translate }}
      <small>{{ "control_panel" | translate }}</small>
    </h1>
    <ol class="breadcrumb">
      <li>
        <a href="#"><i class="fa fa-cogs"></i> {{ "home" | translate }}</a>
      </li>
      <li class="active">{{ "trafficpathanalysis" | translate }}</li>
    </ol>
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="box">
      <div class="box-header">
        <h3 class="box-title">
          {{ "trafficpathanalysis_detail" | translate }}
        </h3>
      </div>
      <!-- /.box-header -->

      <div class="box-body">
        <app-alert></app-alert>
        <!-- <div class="row">
				<div class="col-md-6 offset-md-3">
					<form [formGroup]="trafficpathanalysisdetailForm" autocomplete="off">
						<input type="hidden" [(ngModel)]="trafficpathanalysis.csrfNonce" formControlName="csrfNonce"/>
	
						<div class="form-group">
						<label>{{ 'trafficpathanalysis_sourceIp' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.sourceIp" formControlName="sourceIp" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_destinationIp' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.destinationIp" formControlName="destinationIp" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_step' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.step" formControlName="step" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_routerName' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.routerName" formControlName="routerName" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_routerIp' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.routerIp" formControlName="routerIp" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_command' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.command" formControlName="command" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_destinationMask' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.destinationMask" formControlName="destinationMask" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_proto' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.proto" formControlName="proto" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_pre' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.pre" formControlName="pre" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_cost' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.cost" formControlName="cost" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_flags' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.flags" formControlName="flags" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_nextHop' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.nextHop" formControlName="nextHop" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_interfaceName' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.interfaceName" formControlName="interfaceName" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_foundIpInBlock' | translate }}</label>
<br/>						<input type="checkbox" [(ngModel)]="trafficpathanalysis.foundIpInBlock" formControlName="foundIpInBlock" autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_currentInterfaceCommandOutput' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.currentInterfaceCommandOutput" formControlName="currentInterfaceCommandOutput" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_descriptionTo' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.descriptionTo" formControlName="descriptionTo" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_nextDeviceAvailable' | translate }}</label>
<br/>						<input type="checkbox" [(ngModel)]="trafficpathanalysis.nextDeviceAvailable" formControlName="nextDeviceAvailable" autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_nextDeviceIp' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.nextDeviceIp" formControlName="nextDeviceIp" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_nextDeviceType' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.nextDeviceType" formControlName="nextDeviceType" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_foundHOP' | translate }}</label>
<br/>						<input type="checkbox" [(ngModel)]="trafficpathanalysis.foundHOP" formControlName="foundHOP" autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_markAsHop' | translate }}</label>
<br/>						<input type="checkbox" [(ngModel)]="trafficpathanalysis.markAsHop" formControlName="markAsHop" autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_accessedFromDeviceName' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.accessedFromDeviceName" formControlName="accessedFromDeviceName" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_accessedFromDeviceIP' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.accessedFromDeviceIP" formControlName="accessedFromDeviceIP" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_accessDate' | translate }}</label>
						<input type="text" placeholder="YYYY-MM-DD" id="accessDate" name="accessDate" [(ngModel)]="trafficpathanalysis.accessDate" class="form-control" formControlName="accessDate" bsDatepicker [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }" autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_accessedBy' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.accessedBy" formControlName="accessedBy" class="form-control"  autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_isScheduled' | translate }}</label>
<br/>						<input type="checkbox" [(ngModel)]="trafficpathanalysis.isScheduled" formControlName="isScheduled" autocomplete="off" />
					</div>
					<div class="form-group">
						<label>{{ 'trafficpathanalysis_remarks' | translate }}</label>
						<input type="text" [(ngModel)]="trafficpathanalysis.remarks" formControlName="remarks" class="form-control"  autocomplete="off" />
					</div>

						
						<div *ngIf="trafficpathanalysis.componentId < 0" class="form-group">
							<button class="btn btn-primary" [disabled]="isSubmitted" (click)="onSubmit()"><i class="fa fa-save"></i> {{ 'btn_save_text' | translate }}</button>
						</div>
						
						<div *ngIf="trafficpathanalysis.componentId >= 0" class="form-group">
							<button class="btn btn-primary" [disabled]="isSubmitted" (click)="onSubmit()"><i class="fa fa-save"></i> {{ 'btn_save_text' | translate }}</button>
							&nbsp;
							<button class="btn btn-primary" [disabled]="isSubmitted" (click)="onDelete()"><i class="fa fa-remove"></i> {{ 'btn_delete_text' | translate }}</button>
						</div>
					</form>
					<button class="btn btn-primary" (click)="goBack()"><i class="fa fa-arrow-left"></i> {{ 'btn_go_back_text' | translate }}</button>				
				</div>
			</div> -->

        <!-- custom design starts here -->

        <!-- <highcharts-chart
          [Highcharts]="Highcharts"
          [constructorType]="chartConstructorForServicePath"
          [options]="chartOptionsForServicePath"
          [callbackFunction]="chartCallbackForServicePath"
          [(update)]="updateFlagForServicePath"
          [oneToOne]="oneToOneFlag"
          [runOutsideAngular]="runOutsideAngularFlag"
          style="width: 100%; height: 100%; display: block"
          class="custom"
        ></highcharts-chart>
        <mat-divider></mat-divider>
        <br />

        <highcharts-chart
          [Highcharts]="Highchartstopo"
          [constructorType]="chartConstructorForTopology"
          [options]="chartOptionsForTopology"
          [callbackFunction]="chartCallbackForTopology"
          [(update)]="updateFlagForTopology"
          [oneToOne]="oneToOneFlag"
          [runOutsideAngular]="runOutsideAngularFlag"
          style="width: 100%; height: 600px; display: block"
          class="custom"
		></highcharts-chart> -->
        <br />
        <div>
          <textArea disabled> {{ notificationData }} </textArea>
        </div>
        <br />
        <mat-divider></mat-divider>
        <br />

        <div fxLayoutAlign="center center">
          <mat-spinner *ngIf="showSpinner" color="accent"></mat-spinner>
        </div>

        <div
          fxLayout="column"
          fxLayoutAlign="space-between center"
          fxLayoutGap="20px"
        >
          <div
            fxLayout="row"
            fxLayoutAlign="space-between start"
            fxLayoutGap="20px"
          >
            <!-- service path -->

            <div>
              <highcharts-chart
                [Highcharts]="Highcharts"
                [constructorType]="chartConstructorForServicePath"
                [options]="chartOptionsForServicePath"
                [callbackFunction]="chartCallbackForServicePath"
                [(update)]="updateFlagForServicePath"
                [oneToOne]="oneToOneFlag"
                [runOutsideAngular]="runOutsideAngularFlag"
                style="width: 100%; height: 800px; display: block"
                class="custom"
              ></highcharts-chart>
            </div>

            <!-- <div *ngIf="trafficpathanalysisData">
					  <mat-label class="customFont"> <u>Service Path</u> </mat-label>
					  <mat-list role="list" *ngFor="let item of trafficpathanalysisData">
						<mat-list-item role="listitem">{{item.routerIp}}</mat-list-item>
					  </mat-list>
					</div> -->

            <!-- topology -->

            <div>
              <highcharts-chart
                [Highcharts]="Highchartstopo"
                [constructorType]="chartConstructorForTopology"
                [options]="chartOptionsForTopology"
                [callbackFunction]="chartCallbackForTopology"
                [(update)]="updateFlagForTopology"
                [oneToOne]="oneToOneFlag"
                [runOutsideAngular]="runOutsideAngularFlag"
                style="width: 100%; height: 600px; display: block"
                class="custom"
              ></highcharts-chart>
            </div>
            <!-- <div *ngIf="trafficpathanalysisData">
					  <mat-label class="customFont"> <u>Service Topology</u> </mat-label>
					  
						<div class="vertical-divider">
						  <div >
							<div class="center-element" *ngFor="let item of trafficpathanalysisData">{{item.routerIp}} <br>
							  {{item.routerName}}
							</div>
	
						</div>
						</div>
					  
					</div> -->
          </div>

          

          <!-- report -->
          <div *ngIf="kpiReportData">
            <mat-label class="customFont">
              <u>Hop by Hop Link KPI</u>
            </mat-label>
            <br />

            <table
			  mat-table
			  matTableExporter
              [dataSource]="kpiReportData"
              class="mat-elevation-z8 pad"
              #exporter="matTableExporter"
            >
              <!--- Note that these columns can be defined in any order.
						  The actual rendered columns are set as a property on the row definition" -->

              <!-- Position Column -->
              <ng-container matColumnDef="linkName">
                <th mat-header-cell *matHeaderCellDef>Link Name</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.linkName }}
                </td>
              </ng-container>

              <!-- Name Column -->
              <ng-container matColumnDef="inboundUtilization">
                <th mat-header-cell *matHeaderCellDef>Inbound Utilization</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.inboundUtilization }}
                </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="outboundUtilization">
                <th mat-header-cell *matHeaderCellDef>Outbound Utilization</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.outboundUtilization }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="udpJitterDelay">
                <th mat-header-cell *matHeaderCellDef>UDP Jitter Delay</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.udpJitterDelay }}
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="updJitterAvgDelay">
                <th mat-header-cell *matHeaderCellDef>UDP Jitter AVG Delay</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.updJitterAvgDelay }}
                </td>
              </ng-container>

              <ng-container matColumnDef="updJitterPacketLoss">
                <th mat-header-cell *matHeaderCellDef>
                  UDP jitter packet loss
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.updJitterPacketLoss }}
                </td>
              </ng-container>

              <ng-container matColumnDef="accessDate">
                <th mat-header-cell *matHeaderCellDef>
                  Collection Time
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.accessDate | date: 'dd-MM-yyyy HH:mm:ss'}}
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			</table>
			<br>
			<div>
				<button
            mat-raised-button
            (click)="
              exporter.exportTable('xlsx', {
                fileName: 'KPI Report',
                sheet: 'KPI Report',
                Props: { Author: 'Together Initiatives Limited' }
              })
            "
          >
            Download as Excel
          </button>
          <button mat-raised-button (click)="exporter.exportTable('csv', {
			fileName: 'KPI Report',
			sheet: 'KPI Report',
			Props: { Author: 'Together Initiatives Limited' }
		  })">
            Download as CSV
          </button>
          &nbsp; <b style="color: blue;">Note : '*' marks denotes multiple links are present</b>
			</div>
          </div>
        </div>
        <br />
          <mat-divider></mat-divider>
          <br />
          <div>
            <textArea disabled> {{ notificationDataKPI }} </textArea>
          </div>
          <br />
          <mat-divider></mat-divider>
          <br />
      </div>
    </div>
  </section>
</div>
